-- Cria ScreenGui
local gui = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
gui.Name = "StylishUILib"
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.ResetOnSpawn = false

-- Tamanho e cores
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 450, 0, 350)
mainFrame.Position = UDim2.new(0.5, -225, 0.5, -175)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = gui
mainFrame.Visible = false

-- Arrastável
local drag = false
local UserInputService = game:GetService("UserInputService")
mainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		drag = true
		local mousePos = input.Position
		local startPos = mainFrame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				drag = false
			end
		end)
		while drag do
			wait()
			local delta = UserInputService:GetMouseLocation() - mousePos
			mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end
end)

-- Fonte Bold
local function newLabel(text, size)
	local label = Instance.new("TextLabel")
	label.Text = text
	label.Size = UDim2.new(1, 0, 0, size or 20)
	label.Font = Enum.Font.GothamBold
	label.TextColor3 = Color3.fromRGB(200, 200, 255)
	label.BackgroundTransparency = 1
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.TextSize = 14
	return label
end

-- Tabs
local tabs = Instance.new("Frame", mainFrame)
tabs.Size = UDim2.new(0, 100, 1, 0)
tabs.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

local tabContainer = Instance.new("Frame", mainFrame)
tabContainer.Size = UDim2.new(1, -100, 1, 0)
tabContainer.Position = UDim2.new(0, 100, 0, 0)
tabContainer.BackgroundTransparency = 1

local pages = {}

local function CreateTab(name)
	local tabBtn = Instance.new("TextButton")
	tabBtn.Text = name
	tabBtn.Size = UDim2.new(1, 0, 0, 30)
	tabBtn.BackgroundColor3 = Color3.fromRGB(40, 0, 60)
	tabBtn.TextColor3 = Color3.new(1, 1, 1)
	tabBtn.Font = Enum.Font.GothamBold
	tabBtn.TextSize = 14
	tabBtn.Parent = tabs

	local page = Instance.new("ScrollingFrame", tabContainer)
	page.Size = UDim2.new(1, 0, 1, 0)
	page.ScrollBarThickness = 4
	page.Visible = false
	page.BackgroundTransparency = 1
	page.CanvasSize = UDim2.new(0, 0, 5, 0)

	tabBtn.MouseButton1Click:Connect(function()
		for _, p in pairs(pages) do p.Visible = false end
		page.Visible = true
	end)

	table.insert(pages, page)
	return page
end

-- Section
local function CreateSection(tab, title)
	local sec = Instance.new("Frame", tab)
	sec.Size = UDim2.new(1, -10, 0, 150)
	sec.Position = UDim2.new(0, 5, 0, 10)
	sec.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

	local titleLabel = newLabel(title, 20)
	titleLabel.Parent = sec
	titleLabel.Position = UDim2.new(0, 5, 0, 0)

	return sec
end

-- Toggle estilo alavanca
local function CreateToggle(section, name, default, callback)
	local holder = Instance.new("Frame", section)
	holder.Size = UDim2.new(1, 0, 0, 40)
	holder.BackgroundTransparency = 1

	local text = newLabel(name, 20)
	text.Position = UDim2.new(0, 10, 0, 10)
	text.Size = UDim2.new(0.7, 0, 1, 0)
	text.Parent = holder

	local toggle = Instance.new("ImageButton", holder)
	toggle.Size = UDim2.new(0, 50, 0, 25)
	toggle.Position = UDim2.new(1, -60, 0, 8)
	toggle.Image = "rbxassetid://3570695787"
	toggle.ImageColor3 = default and Color3.fromRGB(120, 0, 255) or Color3.fromRGB(50, 50, 50)

	local state = default
	toggle.MouseButton1Click:Connect(function()
		state = not state
		toggle.ImageColor3 = state and Color3.fromRGB(120, 0, 255) or Color3.fromRGB(50, 50, 50)
		callback(state)
	end)
end

-- Multi Dropdown (checkbox)
local function CreateMultiDropdown(section, title, list, callback)
	local holder = Instance.new("Frame", section)
	holder.Size = UDim2.new(1, 0, 0, 20 + (#list * 20))
	holder.BackgroundTransparency = 1

	local selected = {}

	local titleLabel = newLabel(title, 20)
	titleLabel.Parent = holder

	for i, item in ipairs(list) do
		local check = Instance.new("TextButton", holder)
		check.Size = UDim2.new(1, -10, 0, 20)
		check.Position = UDim2.new(0, 5, 0, 20 * i)
		check.Text = "☐ " .. item
		check.TextColor3 = Color3.new(1, 1, 1)
		check.BackgroundTransparency = 1
		check.Font = Enum.Font.GothamBold
		check.TextSize = 14

		check.MouseButton1Click:Connect(function()
			if selected[item] then
				selected[item] = nil
				check.Text = "☐ " .. item
			else
				selected[item] = true
				check.Text = "☑ " .. item
			end
			callback(selected)
		end)
	end
end

-- Notificação estilosa
local function Notify(text)
	local n = Instance.new("TextLabel", gui)
	n.Text = text
	n.Size = UDim2.new(0, 300, 0, 50)
	n.Position = UDim2.new(0.5, -150, 1, -60)
	n.AnchorPoint = Vector2.new(0.5, 1)
	n.BackgroundColor3 = Color3.fromRGB(40, 0, 60)
	n.TextColor3 = Color3.new(1, 1, 1)
	n.Font = Enum.Font.GothamBold
	n.TextSize = 14
	n.BackgroundTransparency = 0
	n.ZIndex = 10

	game:GetService("TweenService"):Create(n, TweenInfo.new(0.5), {BackgroundTransparency = 0.1}):Play()
	wait(2)
	game:GetService("TweenService"):Create(n, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
	wait(0.5)
	n:Destroy()
end

-- Botão externo com rotação
local icon = Instance.new("ImageButton", gui)
icon.Size = UDim2.new(0, 40, 0, 40)
icon.Position = UDim2.new(0, 20, 0.5, -20)
icon.BackgroundTransparency = 1
icon.Image = "rbxassetid://6824284585"
icon.ZIndex = 10

icon.MouseButton1Click:Connect(function()
	game:GetService("TweenService"):Create(icon, TweenInfo.new(0.3), {
		Rotation = 360
	}):Play()
	mainFrame.Visible = not mainFrame.Visible
	wait(0.4)
	icon.Rotation = 0
end)

-- Exemplo de uso
local aba = CreateTab("Principal")
local sec = CreateSection(aba, "Mutações")
CreateToggle(sec, "Lunar", false, function(val) print("Lunar", val) end)
CreateMultiDropdown(sec, "Selecionar Mutação", {"Gold", "Diamond", "Candy", "Glitch"}, function(list) print(list) end)
Notify("Sistema carregado!")
